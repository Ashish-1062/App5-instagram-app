(this["webpackJsonpinstagram-app"]=this["webpackJsonpinstagram-app"]||[]).push([[0],{53:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},62:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),c=a(18),r=a.n(c),o=(a(53),a(16)),i=(a(54),a(4));var l=function(){return Object(i.jsx)("div",{children:Object(i.jsx)("footer",{className:"app-footer"})})},u=(a(56),a(57),a(95));var p=function(){return Object(i.jsxs)("div",{className:"story-avatar",children:[Object(i.jsx)(u.a,{className:"post-avatar",alt:"Super-car",src:"/static/images/avatar/1.jpg",style:{backgroundColor:"steelblue"}}),Object(i.jsx)(u.a,{className:"post-avatar",alt:"BUGGATI",src:"/static/images/avatar/1.jpg",style:{backgroundColor:"black"}}),Object(i.jsx)(u.a,{className:"post-avatar",alt:"AUDI",src:"/static/images/avatar/1.jpg",style:{backgroundColor:"Red"}}),Object(i.jsx)(u.a,{className:"post-avatar",alt:"BMW",src:"/static/images/avatar/1.jpg",style:{backgroundColor:"black"}})]})};var j=function(){return Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("img",{className:"header-logo",src:"https://1000logos.net/wp-content/uploads/2017/02/Instagram-Logo.png",alt:""}),Object(i.jsx)(p,{})]})},d=(a(62),a(23)),b=d.a.initializeApp({apiKey:"AIzaSyD-8wmk1pPwfAwPz3dLzeWFo1JEfU595_w",authDomain:"instagram-app1.firebaseapp.com",projectId:"instagram-app1",storageBucket:"instagram-app1.appspot.com",messagingSenderId:"942022264530",appId:"1:942022264530:web:6a3ddc8edc5c4b3c6c0f0b",measurementId:"G-J12QTQP7J6"}).firestore(),m=d.a.auth(),g=d.a.storage();var O=function(e){var t=e.postId,a=e.user,s=e.username,c=e.caption,r=e.imageUrl,l=Object(n.useState)([]),p=Object(o.a)(l,2),j=p[0],m=p[1],g=Object(n.useState)(""),O=Object(o.a)(g,2),f=O[0],h=O[1];return Object(n.useEffect)((function(){var e;return t&&(e=b.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[t]),Object(i.jsxs)("div",{className:"post",children:[Object(i.jsxs)("div",{className:"post-header",children:[Object(i.jsx)(u.a,{className:"post-avatar",alt:"Super-car",src:"/static/images/avatar/1.jpg"}),Object(i.jsx)("h3",{children:s})]}),Object(i.jsx)("img",{className:"post-img",src:r,alt:""}),Object(i.jsxs)("h4",{className:"post-text",children:[Object(i.jsxs)("strong",{children:[s," "]}),c]}),Object(i.jsx)("div",{children:j.map((function(e){return Object(i.jsxs)("p",{children:[Object(i.jsx)("strong",{children:e.username}),": ",e.text]})}))}),a&&Object(i.jsxs)("form",{className:"post-cmtBox",children:[Object(i.jsx)("input",{className:"post-input",type:"text",placeholder:"Add a comment...",value:f,onChange:function(e){return h(e.target.value)}}),Object(i.jsx)("button",{className:"post-btn",disabled:!f,type:"submit",onClick:function(e){e.preventDefault(),b.collection("posts").doc(t).collection("comments").add({text:f,username:a.displayName,timestamp:d.a.firestore.FieldValue.serverTimestamp()}),h("")},children:"Post"})]})]})},f=a(91),h=a(96),x=a(92),v=a(93),N=a(94);a(68);var y=function(e){var t=e.username,a=Object(n.useState)(null),s=Object(o.a)(a,2),c=s[0],r=s[1],l=Object(n.useState)(0),u=Object(o.a)(l,2),p=u[0],j=u[1],m=Object(n.useState)(""),O=Object(o.a)(m,2),f=O[0],h=O[1];return Object(i.jsxs)("div",{className:"img-upload",children:[Object(i.jsx)("progress",{className:"imgupload-progress",value:p,max:"100"}),Object(i.jsx)("input",{className:"file-input",type:"text",placeholder:"Enter a caption...",onChange:function(e){return h(e.target.value)}}),Object(i.jsx)("input",{className:"inp",type:"file",onChange:function(e){e.target.files[0]&&r(e.target.files[0])}}),Object(i.jsx)(v.a,{onClick:function(){g.ref("image/".concat(c.name)).put(c).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totelBytes*100);j(t)}),(function(e){console.log(e),alert(e.message)}),(function(){g.ref("image").child(c.name).getDownloadURL().then((function(e){b.collection("posts").add({timestamp:d.a.firestore.FieldValue.serverTimestamp(),caption:f,imageUrl:e,username:t}),j(0),h(""),r(null)}))}))},children:"Upload"})]})};function S(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var C=Object(f.a)((function(e){return Object(h.a)({paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})}));var w=function(){var e=C(),t=Object(n.useState)(S),a=Object(o.a)(t,1)[0],s=Object(n.useState)([]),c=Object(o.a)(s,2),r=c[0],u=c[1],p=Object(n.useState)(!1),d=Object(o.a)(p,2),g=d[0],f=d[1],h=Object(n.useState)(!1),w=Object(o.a)(h,2),k=w[0],I=w[1],U=Object(n.useState)(""),A=Object(o.a)(U,2),E=A[0],B=A[1],D=Object(n.useState)(""),P=Object(o.a)(D,2),L=P[0],J=P[1],T=Object(n.useState)(""),z=Object(o.a)(T,2),W=z[0],F=z[1],G=Object(n.useState)(null),M=Object(o.a)(G,2),Q=M[0],R=M[1];return Object(n.useEffect)((function(){var e=m.onAuthStateChanged((function(e){e?(console.log(e),R(e)):R(null)}));return function(){e()}}),[Q,E]),Object(n.useEffect)((function(){b.collection("posts").onSnapshot((function(e){u(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)(j,{}),Object(i.jsx)("div",{className:"applog-btn",children:Q?Object(i.jsx)(v.a,{onClick:function(){return m.signOut()},children:"Logout"}):Object(i.jsxs)("div",{className:"appsign-btns",children:[Object(i.jsx)(v.a,{className:"sin-btn",onClick:function(){return I(!0)},children:"Sign In"}),Object(i.jsx)(v.a,{className:"sout-btn",onClick:function(){return f(!0)},children:"Sign Up"})]})}),(null===Q||void 0===Q?void 0:Q.displayName)?Object(i.jsx)(y,{username:Q.displayName}):Object(i.jsx)("h3",{children:"Sorry you need to login to upload"}),Object(i.jsx)(x.a,{open:g,onClose:function(){return f(!1)},children:Object(i.jsx)("div",{style:a,className:e.paper,children:Object(i.jsxs)("form",{className:"app-signup",children:[Object(i.jsx)("center",{children:Object(i.jsx)("img",{className:"header-logo",src:"https://1000logos.net/wp-content/uploads/2017/02/Instagram-Logo.png",alt:""})}),Object(i.jsx)(N.a,{placeholder:"username",type:"text",value:E,onChange:function(e){return B(e.target.value)}}),Object(i.jsx)(N.a,{placeholder:"email",type:"text",value:L,onChange:function(e){return J(e.target.value)}}),Object(i.jsx)(N.a,{placeholder:"password",type:"password",value:W,onChange:function(e){return F(e.target.value)}}),Object(i.jsx)(v.a,{onClick:function(e){e.preventDefault(),m.createUserWithEmailAndPassword(L,W).then((function(e){return e.user.updateProfile({displayName:E})})).catch((function(e){return alert(e.message)})),f(!1)},children:"Sign Up"})]})})}),Object(i.jsx)(x.a,{open:k,onClose:function(){return I(!1)},children:Object(i.jsx)("div",{style:a,className:e.paper,children:Object(i.jsxs)("form",{className:"app-signup",children:[Object(i.jsx)("center",{children:Object(i.jsx)("img",{className:"header-logo",src:"https://1000logos.net/wp-content/uploads/2017/02/Instagram-Logo.png",alt:""})}),Object(i.jsx)(N.a,{placeholder:"email",type:"text",value:L,onChange:function(e){return J(e.target.value)}}),Object(i.jsx)(N.a,{placeholder:"password",type:"password",value:W,onChange:function(e){return F(e.target.value)}}),Object(i.jsx)(v.a,{onClick:function(e){e.preventDefault(),m.signInWithEmailAndPassword(L,W).catch((function(e){return alert(e.message)})),I(!1)},children:"Sign In"})]})})}),r.map((function(e){var t=e.id,a=e.post;return Object(i.jsx)(O,{postId:t,user:Q,username:a.username,caption:a.caption,imageUrl:a.imageUrl},t)})),Object(i.jsx)(l,{})]})};r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(w,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.a74faf59.chunk.js.map